## –ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫ (Builder) ‚Äî —à–∞–±–ª–æ–Ω –ø—Ä–æ—î–∫—Ç—É–≤–∞–Ω–Ω—è

**Builder** ‚Äî —Ü–µ –ø–æ—Ä–æ–¥–∂—É—é—á–∏–π —à–∞–±–ª–æ–Ω, —è–∫–∏–π —ñ–Ω–∫–∞–ø—Å—É–ª—é—î —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞ —Ç–∞ –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–∑–¥—ñ–ª–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å –ø–æ–±—É–¥–æ–≤–∏ –Ω–∞ –µ—Ç–∞–ø–∏.

---

### üõ† –ö–æ–ª–∏ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:

* –ö–æ–ª–∏ –ø—Ä–æ—Ü–µ—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ **–Ω–µ –ø–æ–≤–∏–Ω–µ–Ω –∑–∞–ª–µ–∂–∞—Ç–∏** –≤—ñ–¥ —á–∞—Å—Ç–∏–Ω, –∑ —è–∫–∏—Ö –≤—ñ–Ω —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è, —ñ –≤—ñ–¥ —Å–ø–æ—Å–æ–±—É —ó—Ö –ø–æ—î–¥–Ω–∞–Ω–Ω—è.
* –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ **—Ä—ñ–∑–Ω—ñ –≤–∞—Ä—ñ–∞—Ü—ñ—ó** –ø–æ–±—É–¥–æ–≤–∏ –æ–±'—î–∫—Ç–∞ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –π —Ç–æ–≥–æ –∂ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É.

---

### üìä –§–æ—Ä–º–∞–ª—å–Ω–∞ UML-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```mermaid
classDiagram
    class Product
    class Builder {
        <<abstract>>
        +BuildPartA()
        +BuildPartB()
        +GetResult()
        +Reset()
    }
    class ConcreteBuilder {
        +BuildPartA()
        +BuildPartB()
    }
    class FancyBuilder {
        +BuildPartA()
        +BuildPartB()
    }
    class Director {
        +Construct(builder)
    }

    Builder <|-- ConcreteBuilder
    Builder <|-- FancyBuilder
    Director --> Builder
    ConcreteBuilder --> Product
    FancyBuilder --> Product
```

---

### üíª –ü—Ä–∏–∫–ª–∞–¥ –Ω–∞ C#:

```csharp
class Product
{
    public List<string> Parts = new();
    public void Show() => Console.WriteLine(string.Join(", ", Parts));
}

abstract class Builder
{
    protected Product product = new();

    public abstract void BuildPartA();
    public abstract void BuildPartB();

    public virtual Product GetResult() => product;
    public virtual void Reset() => product = new();
}

class ConcreteBuilder : Builder
{
    public override void BuildPartA() => product.Parts.Add("PartA");
    public override void BuildPartB() => product.Parts.Add("PartB");
}

class FancyBuilder : Builder
{
    public override void BuildPartA() => product.Parts.Add("üåü –®–∏–∫–∞—Ä–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ A");
    public override void BuildPartB() => product.Parts.Add("‚ú® –®–∏–∫–∞—Ä–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ B");
}

class Director
{
    public void Construct(Builder builder)
    {
        builder.Reset();
        builder.BuildPartA();
        builder.BuildPartB();
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:
var director = new Director();
var builder = new ConcreteBuilder();
director.Construct(builder);
Product product = builder.GetResult();
product.Show();

var fancyBuilder = new FancyBuilder();
director.Construct(fancyBuilder);
Product fancyProduct = fancyBuilder.GetResult();
fancyProduct.Show();
```

---

### üë• –£—á–∞—Å–Ω–∏–∫–∏ –ø–∞—Ç–µ—Ä–Ω–∞:

* **Product** ‚Äî –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä—é–≤–∞–Ω–æ–≥–æ –æ–±‚Äô—î–∫—Ç–∞. –£ –ø—Ä–∏–∫–ª–∞–¥—ñ: —Å–ø–∏—Å–æ–∫ —á–∞—Å—Ç–∏–Ω.
* **Builder** ‚Äî —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —á–∞—Å—Ç–∏–Ω –æ–±‚Äô—î–∫—Ç–∞ Product.
* **ConcreteBuilder** ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è Builder, —è–∫–∞ —Å—Ç–≤–æ—Ä—é—î Product —Ç–∞ –Ω–∞–¥–∞—î –¥–æ –Ω—å–æ–≥–æ –¥–æ—Å—Ç—É–ø.
* **Director** ‚Äî —Ä–æ–∑–ø–æ—Ä—è–¥–Ω–∏–∫, —è–∫–∏–π –∫–µ—Ä—É—î –ø–æ—Ä—è–¥–∫–æ–º –≤–∏–∫–ª–∏–∫—ñ–≤ –º–µ—Ç–æ–¥—ñ–≤ Builder (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ).

> üî∏ **Director ‚Äî –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π.** –ô–æ–≥–æ —Å–ª—ñ–¥ –¥–æ–¥–∞–≤–∞—Ç–∏ –ª–∏—à–µ —É –≤–∏–ø–∞–¥–∫–∞—Ö, –∫–æ–ª–∏ –±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ –æ–±‚Äô—î–∫—Ç–∞ –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è –∞–±–æ –º–∞—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω—É –ª–æ–≥—ñ–∫—É.

---

### ü•ó –ü—Ä–∏–∫–ª–∞–¥ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è (–±—É–¥—ñ–≤–Ω–∏—Ü—Ç–≤–æ —Å–∞–ª–∞—Ç—É):

```csharp
class Ingredient {
    public string Name;
    public string Amount;
    public override string ToString() => $"{Amount} {Name}";
}

class Salad
{
    public string Name { get; set; }
    public List<Ingredient> Ingredients { get; } = new();
    public void Show() {
        Console.WriteLine($"–°–∞–ª–∞—Ç: {Name}");
        foreach (var i in Ingredients) Console.WriteLine($"- {i}");
    }
}

class SaladBuilder
{
    private readonly Salad salad = new();

    public SaladBuilder Named(string name) { salad.Name = name; return this; }
    public SaladBuilder Add(string name, string amount)
    {
        salad.Ingredients.Add(new Ingredient { Name = name, Amount = amount });
        return this;
    }
    public SaladBuilder AddTomato(int g) => Add("–ø–æ–º—ñ–¥–æ—Ä–∏", $"{g} –≥");
    public SaladBuilder AddCucumber(int g) => Add("–æ–≥—ñ—Ä–∫–∏", $"{g} –≥");
    public SaladBuilder AddOil(string amt) => Add("–æ–ª–∏–≤–∫–æ–≤–∞ –æ–ª—ñ—è", amt);
    public SaladBuilder AddSalt(string amt) => Add("—Å—ñ–ª—å", amt);
    public Salad Build() => salad;
}

var salad = new SaladBuilder()
    .Named("–¶–µ–∑–∞—Ä—å")
    .AddTomato(150)
    .AddCucumber(100)
    .AddOil("2 —Å—Ç. –ª–æ–∂–∫–∏")
    .AddSalt("–¥—Ä—ñ–±–∫–∞")
    .Build();

salad.Show();
```

---

### üîÅ Fluent chaining —Ç–∞ Director

* **Fluent chaining** ‚Äî —Ü–µ —Å—Ç–∏–ª—å, —É —è–∫–æ–º—É –º–µ—Ç–æ–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å —Å–∞–º –æ–±‚Äô—î–∫—Ç, –¥–æ–∑–≤–æ–ª—è—é—á–∏ –±—É–¥—É–≤–∞—Ç–∏ –ª–∞–Ω—Ü—é–∂–æ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤. –í—ñ–Ω –¥–æ–±—Ä–µ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É–≤–∞–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤:

```csharp
var salad = new SaladBuilder()
    .Named("–õ—ñ—Ç–Ω—ñ–π —Å–∞–ª–∞—Ç")
    .AddTomato(100)
    .AddCucumber(80)
    .AddOil("1 —Å—Ç. –ª–æ–∂–∫–∞")
    .Build();
```

* **Director** ‚Äî –∫–æ—Ä–∏—Å–Ω–∏–π, –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑—É–≤–∞—Ç–∏ –∞–±–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —à–∞–±–ª–æ–Ω–∏ –ø–æ–±—É–¥–æ–≤–∏:

```csharp
class SaladDirector
{
    public Salad MakeCaesar(SaladBuilder builder) =>
        builder.Named("–¶–µ–∑–∞—Ä—å")
               .AddTomato(150)
               .AddCucumber(100)
               .AddOil("2 —Å—Ç. –ª–æ–∂–∫–∏")
               .AddSalt("–¥—Ä—ñ–±–∫–∞")
               .Build();
}
```

> Fluent chaining —ñ Director –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å –æ–∫—Ä–µ–º–æ –∞–±–æ —Ä–∞–∑–æ–º, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø–æ—Ç—Ä–µ–± –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

---

### üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó —â–æ–¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

üü¢ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Fluent chaining, —è–∫—â–æ:**

* –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å –∞–±–æ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∫—Ä–æ–∫–∏ –ø–æ–±—É–¥–æ–≤–∏
* –í–∏ —Ü—ñ–Ω—É—î—Ç–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å
* –ö–ª—ñ—î–Ω—Ç –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∫–µ—Ä—É—î –ø–æ–±—É–¥–æ–≤–æ—é –æ–±'—î–∫—Ç–∞

üü¶ **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Director, —è–∫—â–æ:**

* –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω—É –ø–æ–±—É–¥–æ–≤—É
* –õ–æ–≥—ñ–∫–∞ –ø–æ–±—É–¥–æ–≤–∏ —Å–∫–ª–∞–¥–Ω–∞ —ñ —ó—ó —Å–ª—ñ–¥ —ñ–Ω–∫–∞–ø—Å—É–ª—é–≤–∞—Ç–∏

‚û°Ô∏è –£ –±—ñ–ª—å—à–æ—Å—Ç—ñ —Å—É—á–∞—Å–Ω–∏—Ö C#-–¥–æ–¥–∞—Ç–∫—ñ–≤ **Fluent Builder** –≤–∏–≥–ª—è–¥–∞—î —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω—ñ—à–µ —Ç–∞ —á–∏—Ç–∞—î—Ç—å—Å—è –∫—Ä–∞—â–µ.
üîπ –û–¥–Ω–∞–∫, –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ –∑—Ä—É—á–Ω–æ –º–∞—Ç–∏ **Director** —è–∫ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—ñ–≤.

---

---

### ‚ùì –ß–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `abstract class Builder`, –∞ –Ω–µ `interface`?

* –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å –¥–æ–∑–≤–æ–ª—è—î **–∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω**, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Å—Ç–≤–æ—Ä—é–≤–∞–Ω–∏–π –æ–±'—î–∫—Ç (`Product`).
* –ú–æ–∂–Ω–∞ **—Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å–ø—ñ–ª—å–Ω—É –ª–æ–≥—ñ–∫—É** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `GetResult()` –∞–±–æ `Reset()`) –æ–¥–∏–Ω —Ä–∞–∑ —É –±–∞–∑–æ–≤–æ–º—É –∫–ª–∞—Å—ñ.
* –ü—ñ–¥—Ç—Ä–∏–º—É—î **protected –º–µ—Ç–æ–¥–∏**, —è–∫—ñ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —É –ø—ñ–¥–∫–ª–∞—Å–∞—Ö, –∞–ª–µ –Ω–µ –≤–∏–Ω–æ—Å–∏—Ç–∏ –Ω–∞–∑–æ–≤–Ω—ñ.
* –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ **—á–∞—Å—Ç–∫–æ–≤–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó**: –º–æ–∂–Ω–∞ —á–∞—Å—Ç–∏–Ω—É –º–µ—Ç–æ–¥—ñ–≤ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏, –∞ —ñ–Ω—à—ñ –∑–∞–ª–∏—à–∏—Ç–∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–º–∏.
* –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –ª–∏—à–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç. –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å ‚Äî —Ü–µ —ñ –∫–æ–Ω—Ç—Ä–∞–∫—Ç, —ñ —á–∞—Å—Ç–∫–æ–≤–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è.

> üîπ –Ø–∫—â–æ –ª–æ–≥—ñ–∫–∏ –≤ –±–∞–∑–æ–≤–æ–º—É –∫–ª–∞—Å—ñ –Ω–µ–º–∞—î, –∞ –ª–∏—à–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç ‚Äî —Ç–æ–¥—ñ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å. –ê–ª–µ —É –ø–∞—Ç–µ—Ä–Ω—ñ Builder —á–∞—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Å—Ç–∞–Ω —ñ –ª–æ–≥—ñ–∫–∞ ‚Äî —Ç–æ–º—É –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å –±—ñ–ª—å—à –¥–æ—Ä–µ—á–Ω–∏–π.

---

–ù–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è, –ø—ñ–¥—Å—É–º—É–π–º–æ –æ—Å–Ω–æ–≤–Ω—ñ –ø–ª—é—Å–∏ –π –º—ñ–Ω—É—Å–∏ –ø–∞—Ç–µ—Ä–Ω—É Builder.

### ‚úÖ –ü–µ—Ä–µ–≤–∞–≥–∏:

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —à–∞–±–ª–æ–Ω—É Builder –¥–∞—î —Ç–∞–∫—ñ –ø–µ—Ä–µ–≤–∞–≥–∏:

* **–ì–Ω—É—á–∫—ñ—Å—Ç—å** ‚Äî –¥–∞—î –∑–º–æ–≥—É –ø–æ–µ—Ç–∞–ø–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –æ–±'—î–∫—Ç–∏ –∑ —Ä—ñ–∑–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é.
* **–Ü–∑–æ–ª—è—Ü—ñ—è –ª–æ–≥—ñ–∫–∏ –ø–æ–±—É–¥–æ–≤–∏** ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±‚Äô—î–∫—Ç–∞ –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –π–æ–≥–æ —á–∞—Å—Ç–∏–Ω —Ç–∞ –ø–æ—Ä—è–¥–∫—É —Å–∫–ª–∞–¥–∞–Ω–Ω—è.
* **–ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å** ‚Äî –ª–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ç–∏–ø–∏ –ø–æ–±—É–¥–æ–≤–∏ –±–µ–∑ –∑–º—ñ–Ω–∏ —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ–¥—É.
* **–ó—Ä–æ–∑—É–º—ñ–ª–∏–π API** ‚Äî –∑–∞–≤–¥—è–∫–∏ fluent chaining —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–±—É–¥–æ–≤–∏ –≤–∏–≥–ª—è–¥–∞—î —á–∏—Ç–∞—î–º–æ —Ç–∞ —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ.

### ‚ö†Ô∏è –ù–µ–¥–æ–ª—ñ–∫–∏:

* –ë—ñ–ª—å—à–µ –∫–ª–∞—Å—ñ–≤ —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ.
* –î–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –æ–±‚Äô—î–∫—Ç—ñ–≤ ‚Äî –Ω–∞–¥–º—ñ—Ä–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å.

üîö –£ –ø—ñ–¥—Å—É–º–∫—É, –ø–∞—Ç–µ—Ä–Ω Builder ‚Äî —Ü–µ –∑—Ä—É—á–Ω–∏–π —Å–ø–æ—Å—ñ–± —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏ –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º, –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É—é—á–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ –π –Ω–µ –ø–æ—Ä—É—à—É—é—á–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ SOLID.
